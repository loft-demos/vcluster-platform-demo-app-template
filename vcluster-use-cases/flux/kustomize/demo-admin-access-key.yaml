apiVersion: storage.loft.sh/v1
kind: AccessKey
metadata:
  name: admin-user-72tnz
spec:
  displayName: demo-env-admin-access-key
  key: "${accessKey}"
  type: User
  user: admin
---
apiVersion: v1
kind: Secret
metadata:
  name: vcluster-platform-provider-headers
  namespace: p-auth-core
stringData:
  headers: |
    Authorization: Bearer ${accessKey}
---
apiVersion: v1
kind: Secret
metadata:
  name: github-app-secret
  namespace: p-auth-core
  labels:
    loft.sh/project-secret-name: loft-demo-org-cred
data:
---
apiVersion: actions.github.upbound.io/v1alpha1
kind: ActionsSecret
metadata:
  labels:
    testing.upbound.io/example-name: VCLUSTER_PLATFORM_ACCESS_KEY
  name: alpha-apps-access-key
spec:
  deletionPolicy: Delete
  forProvider:
    plaintextValueSecretRef:
      key: accessKey
      name: demo-admin-access-key
      namespace: p-vcluster-flux-demo
    repository: {REPLACE_REPO_NAME}
    secretName: VCLUSTER_PLATFORM_ACCESS_KEY
  initProvider: {}
  managementPolicies:
    - '*'
  providerConfigRef:
    name: github-provider-config
---
apiVersion: actions.github.upbound.io/v1alpha1
kind: ActionsVariable
metadata:
  labels:
    testing.upbound.io/example-name: VCLUSTER_PLATFORM_URL
  name: alpha-apps-vcluster-platform-url
spec:
  deletionPolicy: Delete
  forProvider:
    value: https://{REPLACE_VCLUSTER_NAME}.{REPLACE_BASE_DOMAIN}
    repository: {REPLACE_REPO_NAME}
    variableName: VCLUSTER_PLATFORM_URL
  initProvider: {}
  managementPolicies:
    - '*'
  providerConfigRef:
    name: github-provider-config
---
apiVersion: repo.github.upbound.io/v1alpha1
kind: IssueLabels
metadata:
  name: {REPLACE_REPO_NAME}-repo-labels
spec:
  deletionPolicy: Delete
  forProvider:
    label:
      - name: create-pr-vcluster-external-argocd
        color: ee7d3b
        description: Triggers the creation of a vCluster for a Pull Request via Argo CD
      - name: preview
        color: ee7d3b
        description: Creates vCluster preview environment for a Pull Request with a GitHub Action and Argo CD AppSet
      - name: preview-multi-k8s
        color: ee7d3b
        description: Triggers the creation of a matrix of vCluster instances for different Kubernetes versions
      - name: preview-cluster-ready
        color: ee7d3b
        description: Triggers ArgoCD application set for PR
      - name: 'deploy/flux-vcluster-preview'
        color: c5def5
        description: Triggers Flux creation of vCluster pull request environment
      - name: e2e
        color: ee7d3b
        description: Run e2e tests on PR with vCluster
    repository: {REPLACE_REPO_NAME}
  initProvider: {}
  managementPolicies:
    - '*'
  providerConfigRef:
    name: github-provider-config